const filter=$query("#filter"),data=$query("neo-datavisualizer");function exec({csrf:e,patch:t,clear:n}){return[{name:"reference",text:$trans("Reference"),headStyle:{textAlign:"center"},bodyStyle:{textAlign:"center"},headPdfStyle:function(){return this.headStyle},bodyPdfStyle:function(){return this.bodyStyle},bodyRender:e=>e.reservation.reference,bodyPdfRender:function(e){return this.bodyRender(e)},bodyCsvRender:function(e){return this.bodyRender(e)}},{name:"vehicle",text:$trans("Vehicle"),bodyRender:e=>e.vehicle?$capitalize($trans(e.vehicle.brand))+" "+$capitalize($trans(e.vehicle.model))+" "+e.vehicle.year+" ("+e.vehicle.registration_number+")":empty(),bodyPdfRender:function(e){return this.bodyRender(e)},bodyCsvRender:function(e){return this.bodyRender(e)}},{name:"renter",text:$trans("Renter"),bodyRender:e=>e.agency?`<div>${$capitalize($trans("Agency"))}: ${$capitalize(e.agency.name)}</div>`:e.client?`<div>${$capitalize($trans("Client"))}: ${e.client.last_name.toUpperCase()+" "+$capitalize(e.client.first_name)}</div>`+(e.sclient?`<div>${$capitalize($trans("Secondary client"))}: ${e.sclient.last_name.toUpperCase()+" "+$capitalize(e.sclient.first_name)}</div>`:""):void 0,bodyPdfRender:function(e){return this.bodyRender(e)},bodyCsvRender:e=>e.agency?`${$capitalize($trans("Agency"))}: ${$capitalize(e.agency.name)}`:e.client?`${$capitalize($trans("Client"))}: ${e.client.last_name.toUpperCase()+" "+$capitalize(e.client.first_name)}`+(e.sclient?`, ${$capitalize($trans("Secondary client"))}: ${e.sclient.last_name.toUpperCase()+" "+$capitalize(e.sclient.first_name)}`:""):void 0},{name:"mileage",text:$trans("Mileage"),headStyle:{textAlign:"center"},bodyStyle:{textAlign:"center"},bodyRender:e=>e.mileage+" "+$trans("Km"),headPdfStyle:function(){return this.headStyle},bodyPdfStyle:function(){return this.bodyStyle},bodyPdfRender:function(e){return this.bodyRender(e)},bodyCsvRender:function(e){return this.bodyRender(e)}},{name:"fuel_level",text:$trans("Fuel level"),headStyle:{textAlign:"center"},bodyStyle:{textAlign:"center"},bodyRender:e=>$money(+e.fuel_level,2)+" %",headPdfStyle:function(){return this.headStyle},bodyPdfStyle:function(){return this.bodyStyle},bodyPdfRender:function(e){return this.bodyRender(e)},bodyCsvRender:function(e){return this.bodyRender(e)}},{name:"penalties",text:$trans("Penalties"),headStyle:{textAlign:"center"},bodyStyle:{textAlign:"center"},bodyRender:e=>$money(+JSON.parse(e.penalties).reduce((e,t)=>e+t.cost,0),2)+" "+$core.currency,headPdfStyle:function(){return this.headStyle},bodyPdfStyle:function(){return this.bodyStyle},bodyPdfRender:function(e){return this.bodyRender(e)},bodyCsvRender:function(e){return this.bodyRender(e)}},{name:"status",text:$trans("Status"),headStyle:{textAlign:"center"},bodyStyle:{textAlign:"center"},bodyRender:e=>$capitalize($trans(e.status)),headPdfStyle:function(){return this.headStyle},bodyPdfStyle:function(){return this.bodyStyle},bodyPdfRender:function(e){return this.bodyRender(e)},bodyCsvRender:function(e){return this.bodyRender(e)}},{name:"action",text:$trans("Actions"),headStyle:{width:20,textAlign:"center"},bodyStyle:{width:20,textAlign:"center"},bodyRender:d=>`<action-tools target="${d.id}"csrf="${e}"patch="${t}"clear="${n}"></action-tools>`,headPdfStyle:function(){return this.headStyle},bodyPdfStyle:function(){return this.bodyStyle},bodyPdfRender:()=>empty(),bodyCsvRender:()=>empty()}]}filter.addEventListener("change",e=>{TableVisualizer(data,exec,{search:$routes[e.detail.data?"filter":"entire"]})}),TableVisualizer(data,exec,{search:$routes.filter});